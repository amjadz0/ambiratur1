<!DOCTYPE html>
<html lang="ar" dir="rtl">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</title>
      <link rel="shortcut icon" href="500x500.png" type="image/x-icon">
      <style>
         /* CSS Ù…ØªÙ‚Ø¯Ù… ÙˆÙ…Ø·ÙˆØ± */
         :root {
         --primary-color: #2563eb;
         --secondary-color: #3b82f6;
         --accent-color: #60a5fa;
         --background-color: #ffffff;
         --surface-color: #f8fafc;
         --text-primary: #1e293b;
         --text-secondary: #64748b;
         --border-color: #e2e8f0;
         --message-user: #2563eb;
         --message-agent: #f1f5f9;
         --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
         --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
         --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
         --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
         }
         [data-theme="dark"] {
         --background-color: #0f172a;
         --surface-color: #1e293b;
         --text-primary: #f1f5f9;
         --text-secondary: #94a3b8;
         --border-color: #334155;
         --message-agent: #334155;
         }
         * {
         margin: 0;
         padding: 0;
         box-sizing: border-box;
         }
         body {
         font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
         background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
         color: var(--text-primary);
         line-height: 1.6;
         transition: var(--transition);
         height: 100vh;
         overflow: hidden;
         }
         .chat-app {
         display: flex;
         height: 100vh;
         background: var(--background-color);
         box-shadow: var(--shadow-lg);
         border-radius: 16px;
         overflow: hidden;
         margin: 20px;
         }
         /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª */
         .sidebar {
         width: 350px;
         background: var(--surface-color);
         border-left: 1px solid var(--border-color);
         display: flex;
         flex-direction: column;
         transition: var(--transition);
         }
         .sidebar-header {
         padding: 20px;
         background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
         color: white;
         display: flex;
         justify-content: space-between;
         align-items: center;
         }
         .sidebar-header h2 {
         font-size: 1.5rem;
         font-weight: 700;
         }
         .user-profile {
         display: flex;
         align-items: center;
         gap: 10px;
         }
         .avatar {
         width: 40px;
         height: 40px;
         border-radius: 50%;
         background: var(--accent-color);
         display: flex;
         align-items: center;
         justify-content: center;
         font-weight: 600;
         color: white;
         font-size: 18px;
         }
         .status-indicator {
         width: 12px;
         height: 12px;
         border-radius: 50%;
         background: #10b981;
         position: absolute;
         bottom: 2px;
         right: 2px;
         border: 2px solid white;
         animation: pulse 2s infinite;
         }
         @keyframes pulse {
         0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
         70% { transform: scale(1); box-shadow: 0 0 0 6px rgba(16, 185, 129, 0); }
         100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
         }
         .search-box {
         padding: 15px 20px;
         border-bottom: 1px solid var(--border-color);
         }
         .search-input {
         width: 100%;
         padding: 12px 16px;
         border: 2px solid var(--border-color);
         border-radius: 25px;
         font-size: 14px;
         background: var(--background-color);
         color: var(--text-primary);
         transition: var(--transition);
         }
         .search-input:focus {
         outline: none;
         border-color: var(--primary-color);
         box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
         }
         .conversations-list {
         flex: 1;
         overflow-y: auto;
         padding: 10px;
         }
         .conversation-item {
         display: flex;
         align-items: center;
         padding: 15px;
         border-radius: 12px;
         margin-bottom: 8px;
         cursor: pointer;
         transition: var(--transition);
         position: relative;
         }
         .conversation-item:hover {
         background: var(--background-color);
         transform: translateX(-2px);
         }
         .conversation-item.active {
         background: var(--primary-color);
         color: white;
         }
         .conversation-avatar {
         position: relative;
         margin-left: 12px;
         }
         .conversation-info {
         flex: 1;
         }
         .conversation-name {
         font-weight: 600;
         margin-bottom: 4px;
         }
         .conversation-last-message {
         font-size: 14px;
         color: var(--text-secondary);
         white-space: nowrap;
         overflow: hidden;
         text-overflow: ellipsis;
         }
         .conversation-item.active .conversation-last-message {
         color: rgba(255, 255, 255, 0.8);
         }
         .conversation-time {
         font-size: 12px;
         color: var(--text-secondary);
         }
         .unread-badge {
         position: absolute;
         top: 5px;
         right: 5px;
         background: #ef4444;
         color: white;
         border-radius: 50%;
         width: 20px;
         height: 20px;
         display: flex;
         align-items: center;
         justify-content: center;
         font-size: 12px;
         font-weight: 600;
         }
         /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© */
         .chat-area {
         flex: 1;
         display: flex;
         flex-direction: column;
         background: var(--background-color);
         }
         .chat-header {
         padding: 20px;
         background: var(--surface-color);
         border-bottom: 1px solid var(--border-color);
         display: flex;
         justify-content: space-between;
         align-items: center;
         }
         .chat-header-info {
         display: flex;
         align-items: center;
         gap: 15px;
         }
         .chat-header-name {
         font-size: 1.2rem;
         font-weight: 700;
         }
         .chat-header-status {
         font-size: 14px;
         color: var(--text-secondary);
         }
         .chat-actions {
         display: flex;
         gap: 10px;
         }
         .icon-btn {
         width: 40px;
         height: 40px;
         border: none;
         border-radius: 50%;
         background: var(--background-color);
         color: var(--text-primary);
         cursor: pointer;
         display: flex;
         align-items: center;
         justify-content: center;
         transition: var(--transition);
         font-size: 16px;
         }
         .icon-btn:hover {
         background: var(--primary-color);
         color: white;
         transform: scale(1.1);
         }
         /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
         .messages-container {
         flex: 1;
         padding: 20px;
         overflow-y: auto;
         background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
         }
         [data-theme="dark"] .messages-container {
         background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
         }
         .message {
         display: flex;
         margin-bottom: 20px;
         animation: messageSlide 0.3s ease-out;
         }
         @keyframes messageSlide {
         from {
         opacity: 0;
         transform: translateY(20px);
         }
         to {
         opacity: 1;
         transform: translateY(0);
         }
         }
         .message.user {
         justify-content: flex-end;
         }
         .message-bubble {
         max-width: 70%;
         padding: 15px 20px;
         border-radius: 20px;
         position: relative;
         word-wrap: break-word;
         box-shadow: var(--shadow-sm);
         }
         .message.agent .message-bubble {
         background: var(--message-agent);
         color: var(--text-primary);
         border-bottom-right-radius: 5px;
         }
         .message.user .message-bubble {
         background: var(--message-user);
         color: white;
         border-bottom-left-radius: 5px;
         }
         .message-content {
         margin-bottom: 5px;
         line-height: 1.5;
         }
         .message-time {
         font-size: 12px;
         opacity: 0.7;
         text-align: left;
         }
         .message.user .message-time {
         text-align: right;
         }
         .message-avatar {
         width: 32px;
         height: 32px;
         border-radius: 50%;
         margin: 0 10px;
         align-self: flex-end;
         }
         /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
         .input-container {
         padding: 20px;
         background: var(--surface-color);
         border-top: 1px solid var(--border-color);
         }
         .input-wrapper {
         display: flex;
         align-items: center;
         gap: 10px;
         background: var(--background-color);
         border-radius: 25px;
         padding: 5px;
         border: 2px solid var(--border-color);
         transition: var(--transition);
         }
         .input-wrapper:focus-within {
         border-color: var(--primary-color);
         box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
         }
         .message-input {
         flex: 1;
         border: none;
         background: none;
         padding: 12px 16px;
         font-size: 14px;
         color: var(--text-primary);
         outline: none;
         resize: none;
         max-height: 100px;
         }
         .input-actions {
         display: flex;
         gap: 5px;
         margin-left: 10px;
         }
         .attach-btn, .emoji-btn, .send-btn {
         width: 36px;
         height: 36px;
         border: none;
         border-radius: 50%;
         cursor: pointer;
         display: flex;
         align-items: center;
         justify-content: center;
         transition: var(--transition);
         font-size: 16px;
         }
         .attach-btn, .emoji-btn {
         background: transparent;
         color: var(--text-secondary);
         }
         .attach-btn:hover, .emoji-btn:hover {
         background: var(--background-color);
         color: var(--text-primary);
         }
         .send-btn {
         background: var(--primary-color);
         color: white;
         }
         .send-btn:hover {
         background: var(--secondary-color);
         transform: scale(1.1);
         }
         .send-btn:disabled {
         background: var(--text-secondary);
         cursor: not-allowed;
         transform: none;
         }
         /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ */
         .emoji-picker {
         position: absolute;
         bottom: 80px;
         right: 20px;
         background: var(--surface-color);
         border-radius: 12px;
         box-shadow: var(--shadow-lg);
         padding: 15px;
         display: none;
         grid-template-columns: repeat(8, 1fr);
         gap: 5px;
         z-index: 1000;
         border: 1px solid var(--border-color);
         }
         .emoji-picker.show {
         display: grid;
         }
         .emoji-item {
         width: 30px;
         height: 30px;
         display: flex;
         align-items: center;
         justify-content: center;
         cursor: pointer;
         border-radius: 6px;
         transition: var(--transition);
         font-size: 20px;
         }
         .emoji-item:hover {
         background: var(--background-color);
         transform: scale(1.2);
         }
         /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
         .settings-menu {
         position: absolute;
         top: 60px;
         right: 20px;
         background: var(--surface-color);
         border-radius: 12px;
         box-shadow: var(--shadow-lg);
         padding: 10px;
         display: none;
         min-width: 200px;
         z-index: 1000;
         border: 1px solid var(--border-color);
         }
         .settings-menu.show {
         display: block;
         }
         .settings-item {
         padding: 12px 16px;
         cursor: pointer;
         border-radius: 8px;
         transition: var(--transition);
         display: flex;
         align-items: center;
         gap: 10px;
         }
         .settings-item:hover {
         background: var(--background-color);
         }
         /* Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… */
         .theme-toggle {
         position: fixed;
         bottom: 20px;
         left: 20px;
         background: var(--surface-color);
         border: 2px solid var(--border-color);
         border-radius: 50%;
         width: 50px;
         height: 50px;
         display: flex;
         align-items: center;
         justify-content: center;
         cursor: pointer;
         box-shadow: var(--shadow-md);
         transition: var(--transition);
         z-index: 100;
         }
         .theme-toggle:hover {
         transform: scale(1.1);
         }
         /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ */
         .notification {
         position: fixed;
         top: 20px;
         right: 20px;
         background: var(--primary-color);
         color: white;
         padding: 15px 20px;
         border-radius: 8px;
         box-shadow: var(--shadow-lg);
         transform: translateX(400px);
         transition: var(--transition);
         z-index: 1000;
         }
         .notification.show {
         transform: translateX(0);
         }
         /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø§ÙˆØ¨ */
         @media (max-width: 1024px) {
         .chat-app {
         margin: 10px;
         }
         .sidebar {
         width: 300px;
         }
         }
         @media (max-width: 768px) {
         .chat-app {
         margin: 0;
         border-radius: 0;
         height: 100vh;
         }
         .sidebar {
         position: fixed;
         top: 0;
         right: -100%;
         width: 100%;
         height: 100%;
         z-index: 999;
         border-radius: 0;
         }
         .sidebar.show {
         right: 0;
         }
         .messages-container {
         padding: 15px;
         }
         .message-bubble {
         max-width: 85%;
         }
         }
         @media (max-width: 480px) {
         .chat-header {
         padding: 15px;
         }
         .input-container {
         padding: 15px;
         }
         .message-bubble {
         padding: 12px 16px;
         font-size: 14px;
         }
         }
         /* Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© */
         .typing-indicator {
         display: none;
         align-items: center;
         gap: 4px;
         padding: 15px 20px;
         margin-bottom: 10px;
         }
         .typing-indicator.show {
         display: flex;
         }
         .typing-dot {
         width: 8px;
         height: 8px;
         border-radius: 50%;
         background: var(--text-secondary);
         animation: typing 1.4s infinite ease-in-out;
         }
         .typing-dot:nth-child(1) { animation-delay: -0.32s; }
         .typing-dot:nth-child(2) { animation-delay: -0.16s; }
         @keyframes typing {
         0%, 80%, 100% { transform: scale(0); }
         40% { transform: scale(1); }
         }
         /* Ø³ÙƒØ±ÙˆÙ„ Ù…Ø®ØµØµ */
         ::-webkit-scrollbar {
         width: 6px;
         }
         ::-webkit-scrollbar-track {
         background: var(--background-color);
         }
         ::-webkit-scrollbar-thumb {
         background: var(--border-color);
         border-radius: 3px;
         }
         ::-webkit-scrollbar-thumb:hover {
         background: var(--text-secondary);
         }
         /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
         .fade-in {
         animation: fadeIn 0.5s ease-out;
         }
         @keyframes fadeIn {
         from { opacity: 0; }
         to { opacity: 1; }
         }
         .slide-up {
         animation: slideUp 0.3s ease-out;
         }
         @keyframes slideUp {
         from { transform: translateY(20px); opacity: 0; }
         to { transform: translateY(0); opacity: 1; }
         }
         /* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
         .mobile-menu-btn {
         display: none;
         background: none;
         border: none;
         font-size: 24px;
         cursor: pointer;
         color: var(--text-primary);
         }
         @media (max-width: 768px) {
         .mobile-menu-btn {
         display: block;
         }
         }
         /* ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© */
         .fullscreen-mode .chat-app {
         margin: 0;
         border-radius: 0;
         height: 100vh;
         }
         .fullscreen-mode .sidebar {
         border-radius: 0;
         }
         /* Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ± */
         .image-preview {
         max-width: 200px;
         max-height: 200px;
         border-radius: 12px;
         margin: 10px 0;
         cursor: pointer;
         transition: var(--transition);
         }
         .image-preview:hover {
         transform: scale(1.05);
         }
         /* Ø±Ø¯ÙˆØ¯ Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹Ø© */
         .quick-reactions {
         display: flex;
         gap: 5px;
         margin-top: 10px;
         }
         .reaction-btn {
         background: var(--background-color);
         border: 1px solid var(--border-color);
         border-radius: 15px;
         padding: 5px 10px;
         cursor: pointer;
         font-size: 14px;
         transition: var(--transition);
         }
         .reaction-btn:hover {
         background: var(--primary-color);
         color: white;
         border-color: var(--primary-color);
         }
      </style>
   </head>
   <body>
      <div class="chat-app">
         <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ -->
         <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
               <h2>ğŸ’¬ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª</h2>
               <div class="user-profile">
                  <div class="avatar">
                     Ø£Ù†Ø§
                     <div class="status-indicator"></div>
                  </div>
               </div>
            </div>
            <div class="search-box">
               <input type="text" class="search-input" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ø§Ø¯Ø«Ø©...">
            </div>
            <div class="conversations-list" id="conversationsList">
               <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
            </div>
         </aside>
         <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
         <main class="chat-area">
            <header class="chat-header">
               <button class="mobile-menu-btn" onclick="toggleSidebar()">â˜°</button>
               <div class="chat-header-info">
                  <div class="avatar" id="currentChatAvatar">ğŸ‘¤</div>
                  <div>
                     <div class="chat-header-name" id="currentChatName">Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø©</div>
                     <div class="chat-header-status" id="currentChatStatus">ØºÙŠØ± Ù…ØªØµÙ„</div>
                  </div>
               </div>
               <div class="chat-actions">
                  <button class="icon-btn" onclick="toggleSettings()" title="Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª">âš™ï¸</button>
                  <button class="icon-btn" onclick="toggleTheme()" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹">ğŸŒ™</button>
                  <button class="icon-btn" onclick="toggleFullscreen()" title="Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©">â›¶</button>
               </div>
               <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª -->
               <div class="settings-menu" id="settingsMenu">
                  <div class="settings-item" onclick="clearChat()">
                     ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
                  </div>
                  <div class="settings-item" onclick="exportChat()">
                     ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
                  </div>
                  <div class="settings-item" onclick="muteChat()">
                     ğŸ”‡ ÙƒØªÙ… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                  </div>
                  <div class="settings-item" onclick="blockUser()">
                     ğŸš« Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                  </div>
               </div>
            </header>
            <div class="messages-container" id="messagesContainer">
               <div id="noChatMessage" style="text-align: center; padding: 60px 20px; color: var(--text-secondary);">
                  <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ’¬</div>
                  <h3>Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø© Ù„Ù„Ø¨Ø¯Ø¡</h3>
                  <p>Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø£Ùˆ Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</p>
               </div>
               <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© -->
               <div class="typing-indicator" id="typingIndicator">
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
                  <span style="margin-right: 10px; color: var(--text-secondary);">ÙŠÙƒØªØ¨ Ø§Ù„Ø¢Ù†...</span>
               </div>
            </div>
            <div class="input-container">
               <div class="input-wrapper">
                  <textarea 
                     class="message-input" 
                     id="messageInput" 
                     placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."
                     rows="1"
                     ></textarea>
                  <div class="input-actions">
                     <button class="attach-btn" onclick="attachFile()" title="Ø¥Ø±ÙØ§Ù‚ Ù…Ù„Ù">ğŸ“</button>
                     <button class="emoji-btn" onclick="toggleEmojiPicker()" title="Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠÙ…ÙˆØ¬ÙŠ">ğŸ˜Š</button>
                     <button class="send-btn" id="sendBtn" onclick="sendMessage()" title="Ø¥Ø±Ø³Ø§Ù„">â¤</button>
                  </div>
               </div>
               <!-- Ù…Ù†ØªÙ‚ÙŠ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ -->
               <div class="emoji-picker" id="emojiPicker">
                  <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
               </div>
               <!-- Ø±Ø¯ÙˆØ¯ Ø§Ù„ÙØ¹Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
               <div class="quick-reactions" id="quickReactions">
                  <button class="reaction-btn" onclick="sendQuickReaction('ğŸ‘')">ğŸ‘</button>
                  <button class="reaction-btn" onclick="sendQuickReaction('â¤ï¸')">â¤ï¸</button>
                  <button class="reaction-btn" onclick="sendQuickReaction('ğŸ˜‚')">ğŸ˜‚</button>
                  <button class="reaction-btn" onclick="sendQuickReaction('ğŸ˜®')">ğŸ˜®</button>
                  <button class="reaction-btn" onclick="sendQuickReaction('ğŸ˜¢')">ğŸ˜¢</button>
                  <button class="reaction-btn" onclick="sendQuickReaction('ğŸ‰')">ğŸ‰</button>
               </div>
            </div>
         </main>
      </div>
      <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù… -->
      <div class="theme-toggle" onclick="toggleTheme()">
         <span id="themeIcon">ğŸŒ™</span>
      </div>
      <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ -->
      <div class="notification" id="notification"></div>
      <!-- Ø¹Ù†ØµØ± Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø®ÙÙŠ Ù„Ù„Ù…Ù„ÙØ§Øª -->
      <input type="file" id="fileInput" style="display: none;" accept="image/*,.pdf,.doc,.docx,.txt" onchange="handleFileSelect(event)">
      <script>
         // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
         let conversations = [];
         let currentConversation = null;
         let currentTheme = localStorage.getItem('theme') || 'light';
         let isTyping = false;
         let fileToSend = null;
         
         // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
         document.addEventListener('DOMContentLoaded', function() {
             initializeTheme();
             initializeConversations();
             initializeEmojiPicker();
             setupEventListeners();
             loadConversations();
         });
         
         // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…/Ø§Ù„Ù…Ø¶ÙŠØ¡
         function initializeTheme() {
             document.documentElement.setAttribute('data-theme', currentTheme);
             document.getElementById('themeIcon').textContent = currentTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
         }
         
         // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¸Ù„Ù…/Ø§Ù„Ù…Ø¶ÙŠØ¡
         function toggleTheme() {
             currentTheme = currentTheme === 'light' ? 'dark' : 'light';
             document.documentElement.setAttribute('data-theme', currentTheme);
             localStorage.setItem('theme', currentTheme);
             document.getElementById('themeIcon').textContent = currentTheme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
             showNotification('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„ÙˆØ¶Ø¹ Ø¨Ù†Ø¬Ø§Ø­!');
         }
         
         // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
         function initializeConversations() {
             conversations = [
                 {
                     id: 1,
                     name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                     avatar: 'ğŸ‘¨â€ğŸ’¼',
                     status: 'Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†',
                     lastMessage: 'Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ',
                     lastMessageTime: new Date().toISOString(),
                     unread: 2,
                     messages: [
                         {
                             id: 1,
                             content: 'Ù…Ø±Ø­Ø¨Ø§Ù‹! ÙƒÙŠÙ Ø­Ø§Ù„ÙƒØŸ',
                             sender: 'agent',
                             time: new Date().toISOString(),
                             status: 'read'
                         },
                         {
                             id: 2,
                             content: 'Ø£Ù†Ø§ Ø¨Ø®ÙŠØ±ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ!',
                             sender: 'user',
                             time: new Date().toISOString(),
                             status: 'read'
                         }
                     ]
                 },
                 {
                     id: 2,
                     name: 'ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ',
                     avatar: 'ğŸ‘©â€ğŸ“',
                     status: 'Ù…ØªØµÙ„Ø©',
                     lastMessage: 'Ù‡Ù„ Ø£ØªÙ…Ù…Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ',
                     lastMessageTime: new Date(Date.now() - 3600000).toISOString(),
                     unread: 0,
                     messages: [
                         {
                             id: 1,
                             content: 'Ù‡Ù„ Ø£ØªÙ…Ù…Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ',
                             sender: 'agent',
                             time: new Date(Date.now() - 3600000).toISOString(),
                             status: 'read'
                         }
                     ]
                 },
                 {
                     id: 3,
                     name: 'Ù…Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯',
                     avatar: 'ğŸ‘¨â€ğŸ”§',
                     status: 'ØºÙŠØ± Ù…ØªØµÙ„',
                     lastMessage: 'Ø´ÙƒØ±Ø§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©!',
                     lastMessageTime: new Date(Date.now() - 7200000).toISOString(),
                     unread: 0,
                     messages: []
                 }
             ];
         }
         
         // ØªÙ‡ÙŠØ¦Ø© Ù…Ù†ØªÙ‚ÙŠ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
         function initializeEmojiPicker() {
             const emojis = ['ğŸ˜€', 'ğŸ˜‚', 'ğŸ˜', 'ğŸ¤”', 'ğŸ‘', 'ğŸ‘', 'â¤ï¸', 'ğŸ”¥', 'ğŸ‰', 'ğŸ˜¢', 'ğŸ˜¡', 'ğŸ™„', 'ğŸ˜´', 'ğŸ¤—', 'ğŸ˜Š', 'ğŸ˜', 'ğŸ¤“', 'ğŸ’ª', 'ğŸŒŸ', 'ğŸ’¯', 'ğŸ””', 'ğŸ“', 'ğŸ’¬', 'â°', 'ğŸ¯', 'ğŸ’¡', 'ğŸ”‘', 'ğŸ”’', 'ğŸ“§', 'ğŸ“±'];
             const emojiPicker = document.getElementById('emojiPicker');
             
             emojis.forEach(emoji => {
                 const emojiItem = document.createElement('div');
                 emojiItem.className = 'emoji-item';
                 emojiItem.textContent = emoji;
                 emojiItem.onclick = () => insertEmoji(emoji);
                 emojiPicker.appendChild(emojiItem);
             });
         }
         
         // Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
         function setupEventListeners() {
             // Ø§Ù„Ø¨Ø­Ø«
             document.getElementById('searchInput').addEventListener('input', function(e) {
                 searchConversations(e.target.value);
             });
         
             // Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
             const messageInput = document.getElementById('messageInput');
             messageInput.addEventListener('keypress', function(e) {
                 if (e.key === 'Enter' && !e.shiftKey) {
                     e.preventDefault();
                     sendMessage();
                 }
             });
         
             messageInput.addEventListener('input', function() {
                 this.style.height = 'auto';
                 this.style.height = Math.min(this.scrollHeight, 100) + 'px';
                 
                 // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©
                 if (!isTyping) {
                     simulateTyping();
                 }
             });
         
             // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
             document.addEventListener('click', function(e) {
                 if (!e.target.closest('.emoji-btn')) {
                     document.getElementById('emojiPicker').classList.remove('show');
                 }
                 if (!e.target.closest('.icon-btn')) {
                     document.getElementById('settingsMenu').classList.remove('show');
                 }
             });
         
             // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
             window.addEventListener('resize', function() {
                 if (window.innerWidth > 768) {
                     document.getElementById('sidebar').classList.remove('show');
                 }
             });
         }
         
         // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
         function loadConversations() {
             renderConversations();
         }
         
         // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
         function renderConversations() {
             const conversationsList = document.getElementById('conversationsList');
             conversationsList.innerHTML = conversations.map(conversation => `
                 <div class="conversation-item ${currentConversation?.id === conversation.id ? 'active' : ''}" 
                      onclick="selectConversation(${conversation.id})">
                     <div class="conversation-avatar">
                         <div class="avatar">${conversation.avatar}</div>
                         ${conversation.unread > 0 ? `<div class="unread-badge">${conversation.unread}</div>` : ''}
                     </div>
                     <div class="conversation-info">
                         <div class="conversation-name">${conversation.name}</div>
                         <div class="conversation-last-message">${conversation.lastMessage}</div>
                     </div>
                     <div class="conversation-time">${formatTime(conversation.lastMessageTime)}</div>
                 </div>
             `).join('');
         }
         
         // Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§Ø¯Ø«Ø©
         function selectConversation(id) {
             currentConversation = conversations.find(conv => conv.id === id);
             if (currentConversation) {
                 // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                 document.getElementById('currentChatName').textContent = currentConversation.name;
                 document.getElementById('currentChatAvatar').textContent = currentConversation.avatar;
                 document.getElementById('currentChatStatus').textContent = currentConversation.status;
                 
                 // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
                 renderMessages();
                 
                 // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡Ø©
                 currentConversation.unread = 0;
                 renderConversations();
                 
                 // Ø¥Ø®ÙØ§Ø¡ Ø±Ø³Ø§Ù„Ø© "Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø©"
                 document.getElementById('noChatMessage').style.display = 'none';
                 
                 // ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø¢Ø®Ø± Ø±Ø³Ø§Ù„Ø©
                 scrollToBottom();
                 
                 // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„
                 if (window.innerWidth <= 768) {
                     document.getElementById('sidebar').classList.remove('show');
                 }
             }
         }
         
         // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
         function renderMessages() {
             if (!currentConversation) return;
         
             const messagesContainer = document.getElementById('messagesContainer');
             const existingMessages = messagesContainer.querySelectorAll('.message');
             existingMessages.forEach(msg => msg.remove());
         
             currentConversation.messages.forEach(message => {
                 const messageElement = createMessageElement(message);
                 messagesContainer.appendChild(messageElement);
             });
         
             scrollToBottom();
         }
         
         // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø©
         function createMessageElement(message) {
             const messageDiv = document.createElement('div');
             messageDiv.className = `message ${message.sender}`;
             
             const time = new Date(message.time).toLocaleTimeString('ar-EG', {
                 hour: '2-digit',
                 minute: '2-digit'
             });
         
             messageDiv.innerHTML = `
                 ${message.sender === 'agent' ? `
                     <div class="message-avatar avatar">
                         ${currentConversation.avatar}
                     </div>
                 ` : ''}
                 <div class="message-bubble">
                     <div class="message-content">${escapeHtml(message.content)}</div>
                     <div class="message-time">
                         ${time}
                         ${message.sender === 'user' ? `
                             <span class="message-status">
                                 ${message.status === 'read' ? 'âœ“âœ“' : 'âœ“'}
                             </span>
                         ` : ''}
                     </div>
                 </div>
                 ${message.sender === 'user' ? `
                     <div class="message-avatar avatar">Ø£Ù†Ø§</div>
                 ` : ''}
             `;
         
             return messageDiv;
         }
         
         // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
         function sendMessage() {
             const messageInput = document.getElementById('messageInput');
             const content = messageInput.value.trim();
         
             if (!content && !fileToSend) return;
             if (!currentConversation) {
                 showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§Ø¯Ø«Ø© Ø£ÙˆÙ„Ø§Ù‹!');
                 return;
             }
         
             const message = {
                 id: Date.now(),
                 content: content || 'ğŸ“ Ù…Ù„Ù Ù…Ø±ÙÙ‚',
                 sender: 'user',
                 time: new Date().toISOString(),
                 status: 'sent',
                 file: fileToSend
             };
         
             currentConversation.messages.push(message);
             currentConversation.lastMessage = content || 'ğŸ“ Ù…Ù„Ù Ù…Ø±ÙÙ‚';
             currentConversation.lastMessageTime = message.time;
         
             // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
             const messageElement = createMessageElement(message);
             document.getElementById('messagesContainer').appendChild(messageElement);
         
             // Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù„Ù
             messageInput.value = '';
             fileToSend = null;
             messageInput.style.height = 'auto';
         
             scrollToBottom();
             renderConversations();
         
             // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø±Ø¯
             setTimeout(() => simulateResponse(), 1000);
         }
         
         // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø©
         function simulateTyping() {
             isTyping = true;
             // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© Ù‡Ù†Ø§
         }
         
         // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø±Ø¯
         function simulateResponse() {
             if (!currentConversation) return;
         
             const responses = [
                 'Ø´ÙƒØ±Ø§Ù‹ Ù„Ø±Ø³Ø§Ù„ØªÙƒ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ',
                 'Ù‡Ø°Ø§ Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù…! Ø£Ø®Ø¨Ø±Ù†ÙŠ Ø£ÙƒØ«Ø±.',
                 'Ø£ÙÙ‡Ù… Ù…Ø§ ØªØ¹Ù†ÙŠÙ‡. Ù…Ø§Ø°Ø§ Ø¹Ù†...ØŸ',
                 'Ø±Ø§Ø¦Ø¹! Ù‡Ù„ Ù‡Ù†Ø§Ùƒ Ø´ÙŠØ¡ Ø¢Ø®Ø±ØŸ',
                 'Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ Ù‡Ø°Ø§ Ù…Ø¹ÙŠ.',
                 'Ø£ÙˆØ§ÙÙ‚Ùƒ Ø§Ù„Ø±Ø£ÙŠ ØªÙ…Ø§Ù…Ø§Ù‹!',
                 'Ù‡Ø°Ø§ Ø³Ø¤Ø§Ù„ Ø¬ÙŠØ¯! Ø¯Ø¹Ù†ÙŠ Ø£ÙÙƒØ±...'
             ];
         
             const randomResponse = responses[Math.floor(Math.random() * responses.length)];
         
             // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
             document.getElementById('typingIndicator').classList.add('show');
             scrollToBottom();
         
             setTimeout(() => {
                 document.getElementById('typingIndicator').classList.remove('show');
         
                 const responseMessage = {
                     id: Date.now() + 1,
                     content: randomResponse,
                     sender: 'agent',
                     time: new Date().toISOString(),
                     status: 'read'
                 };
         
                 currentConversation.messages.push(responseMessage);
                 currentConversation.lastMessage = randomResponse;
                 currentConversation.lastMessageTime = responseMessage.time;
         
                 const messageElement = createMessageElement(responseMessage);
                 document.getElementById('messagesContainer').appendChild(messageElement);
         
                 scrollToBottom();
                 renderConversations();
                 showNotification('ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† ' + currentConversation.name);
             }, 2000);
         }
         
         // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø¯ ÙØ¹Ù„ Ø³Ø±ÙŠØ¹
         function sendQuickReaction(emoji) {
             if (!currentConversation) {
                 showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§Ø¯Ø«Ø© Ø£ÙˆÙ„Ø§Ù‹!');
                 return;
             }
         
             const message = {
                 id: Date.now(),
                 content: emoji,
                 sender: 'user',
                 time: new Date().toISOString(),
                 status: 'sent'
             };
         
             currentConversation.messages.push(message);
             currentConversation.lastMessage = emoji;
             currentConversation.lastMessageTime = message.time;
         
             const messageElement = createMessageElement(message);
             document.getElementById('messagesContainer').appendChild(messageElement);
         
             scrollToBottom();
             renderConversations();
         
             setTimeout(() => simulateResponse(), 1000);
         }
         
         // Ø¥Ø¯Ø±Ø§Ø¬ Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
         function insertEmoji(emoji) {
             const messageInput = document.getElementById('messageInput');
             messageInput.value += emoji;
             messageInput.focus();
             toggleEmojiPicker();
         }
         
         // ØªØ¨Ø¯ÙŠÙ„ Ù…Ù†ØªÙ‚ÙŠ Ø§Ù„Ø¥ÙŠÙ…ÙˆØ¬ÙŠ
         function toggleEmojiPicker() {
             const emojiPicker = document.getElementById('emojiPicker');
             emojiPicker.classList.toggle('show');
         }
         
         // Ø¥Ø±ÙØ§Ù‚ Ù…Ù„Ù
         function attachFile() {
             document.getElementById('fileInput').click();
         }
         
         // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù
         function handleFileSelect(event) {
             const file = event.target.files[0];
             if (file) {
                 fileToSend = {
                     name: file.name,
                     size: file.size,
                     type: file.type
                 };
                 showNotification(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„Ù: ${file.name}`);
             }
         }
         
         // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
         function clearChat() {
             if (!currentConversation) {
                 showNotification('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø­Ø§Ø¯Ø«Ø© Ø£ÙˆÙ„Ø§Ù‹!');
                 return;
             }
         
             if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø±Ø³Ø§Ø¦Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŸ')) {
                 currentConversation.messages = [];
                 renderMessages();
                 showNotification('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø¨Ù†Ø¬Ø§Ø­!');
             }
             toggleSettings();
         }
         
         // ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
         function exportChat() {
             if (!currentConversation || currentConversation.messages.length === 0) {
                 showNotification('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ø³Ø§Ø¦Ù„ Ù„Ù„ØªØµØ¯ÙŠØ±!');
                 return;
             }
         
             let content = `Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹: ${currentConversation.name}\n`;
             content += `ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµØ¯ÙŠØ±: ${new Date().toLocaleString('ar-EG')}\n`;
             content += '='.repeat(50) + '\n\n';
         
             currentConversation.messages.forEach(message => {
                 const time = new Date(message.time).toLocaleString('ar-EG');
                 const sender = message.sender === 'user' ? 'Ø£Ù†Ø§' : currentConversation.name;
                 content += `[${time}] ${sender}: ${message.content}\n`;
             });
         
             const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
             const url = URL.createObjectURL(blob);
             
             const a = document.createElement('a');
             a.href = url;
             a.download = `chat_${currentConversation.name}_${new Date().toISOString().split('T')[0]}.txt`;
             document.body.appendChild(a);
             a.click();
             document.body.removeChild(a);
             URL.revokeObjectURL(url);
             
             showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø¨Ù†Ø¬Ø§Ø­!');
             toggleSettings();
         }
         
         // ÙƒØªÙ… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
         function muteChat() {
             showNotification('ØªÙ… ÙƒØªÙ… Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©!');
             toggleSettings();
         }
         
         // Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
         function blockUser() {
             if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø¸Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ')) {
                 showNotification('ØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­!');
                 // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ø§Ù„Ø­Ø¸Ø±
             }
             toggleSettings();
         }
         
         // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
         function toggleSettings() {
             const settingsMenu = document.getElementById('settingsMenu');
             settingsMenu.classList.toggle('show');
         }
         
         // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ
         function toggleSidebar() {
             const sidebar = document.getElementById('sidebar');
             sidebar.classList.toggle('show');
         }
         
         // ØªØ¨Ø¯ÙŠÙ„ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
         function toggleFullscreen() {
             document.body.classList.toggle('fullscreen-mode');
             showNotification(document.body.classList.contains('fullscreen-mode') ? 'ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©!' : 'ØªÙ… Ø¥ÙŠÙ‚Ø§Ù ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©!');
         }
         
         // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª
         function searchConversations(query) {
             const filteredConversations = conversations.filter(conv => 
                 conv.name.toLowerCase().includes(query.toLowerCase()) ||
                 conv.lastMessage.toLowerCase().includes(query.toLowerCase())
             );
             
             const conversationsList = document.getElementById('conversationsList');
             conversationsList.innerHTML = filteredConversations.map(conversation => `
                 <div class="conversation-item ${currentConversation?.id === conversation.id ? 'active' : ''}" 
                      onclick="selectConversation(${conversation.id})">
                     <div class="conversation-avatar">
                         <div class="avatar">${conversation.avatar}</div>
                         ${conversation.unread > 0 ? `<div class="unread-badge">${conversation.unread}</div>` : ''}
                     </div>
                     <div class="conversation-info">
                         <div class="conversation-name">${conversation.name}</div>
                         <div class="conversation-last-message">${conversation.lastMessage}</div>
                     </div>
                     <div class="conversation-time">${formatTime(conversation.lastMessageTime)}</div>
                 </div>
             `).join('');
         }
         
         // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª
         function formatTime(dateString) {
             const date = new Date(dateString);
             const now = new Date();
             const diffTime = Math.abs(now - date);
             const diffMinutes = Math.floor(diffTime / (1000 * 60));
         
             if (diffMinutes < 1) return 'Ø§Ù„Ø¢Ù†';
             if (diffMinutes < 60) return `Ù‚Ø¨Ù„ ${diffMinutes} Ø¯Ù‚ÙŠÙ‚Ø©`;
             
             const diffHours = Math.floor(diffTime / (1000 * 60 * 60));
             if (diffHours < 24) return `Ù‚Ø¨Ù„ ${diffHours} Ø³Ø§Ø¹Ø©`;
             
             return date.toLocaleDateString('ar-EG');
         }
         
         // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³ÙÙ„
         function scrollToBottom() {
             const messagesContainer = document.getElementById('messagesContainer');
             messagesContainer.scrollTop = messagesContainer.scrollHeight;
         }
         
         // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±
         function showNotification(message) {
             const notification = document.getElementById('notification');
             notification.textContent = message;
             notification.classList.add('show');
             
             setTimeout(() => {
                 notification.classList.remove('show');
             }, 3000);
         }
         
         // Ù‡Ø±ÙˆØ¨ HTML
         function escapeHtml(text) {
             const div = document.createElement('div');
             div.textContent = text;
             return div.innerHTML;
         }
         
         // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
         function createNewConversation() {
             const name = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ:');
             if (name) {
                 const newConversation = {
                     id: Date.now(),
                     name: name,
                     avatar: 'ğŸ‘¤',
                     status: 'Ù…ØªØµÙ„',
                     lastMessage: 'Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©',
                     lastMessageTime: new Date().toISOString(),
                     unread: 0,
                     messages: []
                 };
                 
                 conversations.unshift(newConversation);
                 renderConversations();
                 selectConversation(newConversation.id);
                 showNotification(`ØªÙ… Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ ${name}`);
             }
         }
         
         // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©
         document.addEventListener('DOMContentLoaded', function() {
             const sidebarHeader = document.querySelector('.sidebar-header');
             const newChatBtn = document.createElement('button');
             newChatBtn.className = 'icon-btn';
             newChatBtn.innerHTML = 'â•';
             newChatBtn.title = 'Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©';
             newChatBtn.onclick = createNewConversation;
             sidebarHeader.appendChild(newChatBtn);
         });
      </script>
   </body>
</html>